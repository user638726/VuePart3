"use strict";(self["webpackChunknewproject2"]=self["webpackChunknewproject2"]||[]).push([[170],{5170:function(e,t,a){a.r(t),a.d(t,{default:function(){return He}});var i=a(641),n=a(33),l=a(3751);const o={class:"navbar navbar-expand-lg bg-dark fixed-top","data-bs-theme":"dark"},r={class:"container-fluid"},s={class:"collapse navbar-collapse",id:"navbarText"},u={class:"navbar-nav me-auto mb-2 mb-lg-0"},c={class:"nav-item"},d={class:"nav-item"},v={class:"nav-item"},h={class:"navbar-nav ms-auto"},p={class:"cart-anchor"},g={key:0,class:"cart-badge badge rounded-pill bg-danger"},m={key:0,class:"cart-preview position-absolute bg-white text-dark border rounded shadow"},f=["src"],b={class:"flex-grow-1"},w={class:"fw-bold"},y={class:"text-dark small"},k=["onClick"],x={class:"p-2 text-center"},S={class:"flex-grow-1"},C={class:"hero-section d-flex align-items-center"},L={class:"container position-relative"},E={class:"row"},_={class:"col-lg-6 col-md-8"},A={class:"row mb-5"},T={class:"col-12"},W={class:"row mb-5"},I={class:"col-12"};function M(e,t,a,M,$,N){const D=(0,i.g2)("Loading"),j=(0,i.g2)("router-link"),R=(0,i.g2)("TitleList"),O=(0,i.g2)("ProductCarousel");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(D,{active:$.isLoading},null,8,["active"]),(0,i.Lk)("nav",o,[(0,i.Lk)("div",r,[(0,i.bF)(j,{class:"navbar-brand",to:"/"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.eW)(" 籃球瘋 ",-1)])),_:1,__:[2]}),t[8]||(t[8]=(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,i.Lk)("div",s,[(0,i.Lk)("ul",u,[(0,i.Lk)("li",c,[(0,i.bF)(j,{class:"nav-link",to:"/about"},{default:(0,i.k6)(()=>t[3]||(t[3]=[(0,i.eW)("關於",-1)])),_:1,__:[3]})]),(0,i.Lk)("li",d,[(0,i.bF)(j,{class:"nav-link",to:"/frontproducts"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.eW)("產品",-1)])),_:1,__:[4]})]),(0,i.Lk)("li",v,[(0,i.bF)(j,{class:"nav-link",to:"/news"},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.eW)("最新消息",-1)])),_:1,__:[5]})])]),(0,i.Lk)("ul",h,[(0,i.Lk)("span",(0,i.v6)({ref:"cartIcon",class:"cart-wrapper"},(0,i.Tb)(N.cartIconEvents,!0)),[(0,i.Lk)("div",p,[(0,i.bF)(j,{class:"nav-link cart-link",to:"/user/cart",style:{"margin-right":"0.5cm"}},{default:(0,i.k6)(()=>[t[6]||(t[6]=(0,i.eW)(" 購物車 ",-1)),N.cartQty>0?((0,i.uX)(),(0,i.CE)("span",g,(0,n.v_)(N.cartQty),1)):(0,i.Q3)("",!0)]),_:1,__:[6]})]),$.showCartPreview&&N.cartQty>0?((0,i.uX)(),(0,i.CE)("div",m,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(N.cartItems,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"d-flex align-items-center p-2 border-bottom"},[(0,i.Lk)("img",{src:e.product.imageUrl,alt:"商品圖片",class:"me-2",style:{width:"50px",height:"50px","object-fit":"cover"}},null,8,f),(0,i.Lk)("div",b,[(0,i.Lk)("div",w,(0,n.v_)(e.product.title),1),(0,i.Lk)("div",y,"數量: "+(0,n.v_)(e.qty),1)]),(0,i.Lk)("button",{class:"btn btn-sm btn-outline-danger ms-2",onClick:(0,l.D$)(t=>N.removeCartItem(e.id),["stop","prevent"])}," × ",8,k)]))),128)),(0,i.Lk)("div",x,[(0,i.bF)(j,{to:"/user/cart",class:"btn btn-sm btn-dark"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)(" 前往購物車 ",-1)])),_:1,__:[7]})])])):(0,i.Q3)("",!0)],16)])])])]),(0,i.Lk)("main",S,[(0,i.Lk)("section",C,[t[11]||(t[11]=(0,i.Lk)("div",{class:"hero-overlay"},null,-1)),(0,i.Lk)("div",L,[(0,i.Lk)("div",E,[(0,i.Lk)("div",_,[t[9]||(t[9]=(0,i.Lk)("h1",{class:"display-3 fw-bold text-white"},"籃球瘋",-1)),t[10]||(t[10]=(0,i.Lk)("p",{class:"lead text-white"},"這裡是最強的籃球訓練平台！",-1)),(0,i.Lk)("button",{class:"btn btn-dark btn-lg mt-3",onClick:t[0]||(t[0]=t=>e.$router.push("/frontproducts"))}," 立即選購 ")])])])]),(0,i.Lk)("div",A,[(0,i.Lk)("div",T,[(0,i.bF)(R)])]),(0,i.Lk)("div",W,[(0,i.Lk)("div",I,[t[12]||(t[12]=(0,i.Lk)("h2",{class:"text-center fw-bold mb-4"},"熱賣產品",-1)),$.products.length?((0,i.uX)(),(0,i.Wv)(O,{key:0,products:$.products,"cart-icon-ref":e.$refs.cartIcon,"cart-qty":N.cartQty,onAddToCart:t[1]||(t[1]=(e,t)=>N.addCart(e,t)),onCardClick:N.getProduct},null,8,["products","cart-icon-ref","cart-qty","onCardClick"])):(0,i.Q3)("",!0)])])])],64)}const $={class:"title-list-container"},N={class:"news-box"},D={class:"news-list"},j=["href"],R={class:"text-center mt-3"},O={key:0,style:{color:"red"},class:"mt-3"};function F(e,t,a,l,o,r){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",$,[t[1]||(t[1]=(0,i.Lk)("h2",{class:"fw-bold text-center mb-4"},"最新消息",-1)),(0,i.Lk)("div",N,[(0,i.Lk)("ul",D,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.limitedPosts,(e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t,class:"news-item"},[(0,i.Lk)("a",{href:r.getFirstLink(e),target:"_blank",rel:"noopener noreferrer",class:"news-title"},(0,n.v_)(e.postInfo.title),9,j)]))),128))]),(0,i.Lk)("div",R,[(0,i.bF)(s,{to:"/news",class:"btn btn-dark"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)(" 查看更多 ",-1)])),_:1,__:[0]})])]),o.error?((0,i.uX)(),(0,i.CE)("div",O," 錯誤："+(0,n.v_)(o.error),1)):(0,i.Q3)("",!0)])}var B={name:"TitleList",data(){return{files:["nba_6499.json","nba_6500.json"],posts:[],error:null}},computed:{limitedPosts(){return this.posts.slice(0,5)}},mounted(){this.loadAllJsonFiles()},methods:{async loadAllJsonFiles(){try{const e=this.files.map(e=>fetch(e).then(t=>{if(!t.ok)throw new Error(`${e} 載入失敗`);return t.json()})),t=await Promise.all(e);t.forEach(e=>{e.forEach(e=>{e.postInfo?.title&&"unknown"!==e.postInfo.title&&this.posts.push(e)})})}catch(e){this.error=e.message,alert("載入失敗："+e.message)}},getFirstLink(e){const t=e.contentInfo?.link||[],a=e.contentInfo?.image||[],i=t.filter(e=>!a.includes(e));return i[0]||t[0]||"#"}}},X=a(6262);const P=(0,X.A)(B,[["render",F],["__scopeId","data-v-6808071b"]]);var K=P;const z={class:"carousel-wrapper"},q=["onClick"],V=["src","alt"],Q={class:"card-body text-center"},Y={class:"card-title"},U={class:"card-text"},G={class:"text-danger fw-bold"},H={class:"mt-auto"},J=["disabled","onClick"],Z={key:0,class:"spinner-border spinner-border-sm text-light",role:"status"},ee={key:1};function te(e,t,a,o,r,s){const u=(0,i.g2)("Slide"),c=(0,i.g2)("Navigation"),d=(0,i.g2)("Pagination"),v=(0,i.g2)("Carousel");return(0,i.uX)(),(0,i.CE)("div",z,[(0,i.bF)(v,{ref:"carousel","wrap-around":!0,"mouse-drag":!0,transition:500,"items-to-scroll":1,breakpoints:r.breakpoints},{addons:(0,i.k6)(()=>[(0,i.bF)(c,null,{prev:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.Lk)("button",{class:"custom-arrow left","aria-label":"prev"},"‹",-1)])),next:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.Lk)("button",{class:"custom-arrow right","aria-label":"next"},"›",-1)])),_:1}),(0,i.bF)(d)]),default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.products,t=>((0,i.uX)(),(0,i.Wv)(u,{key:t.id},{default:(0,i.k6)(()=>[(0,i.Lk)("div",{class:"card product-card",onClick:a=>e.$emit("card-click",t.id)},[(0,i.Lk)("img",{src:t.imageUrl,alt:t.title,class:"card-img-top"},null,8,V),(0,i.Lk)("div",Q,[(0,i.Lk)("h5",Y,(0,n.v_)(t.title),1),(0,i.Lk)("p",U,(0,n.v_)(t.description),1),(0,i.Lk)("p",G,(0,n.v_)(o.formatCurrency(t.price)),1),(0,i.Lk)("div",H,[(0,i.Lk)("button",{type:"button",class:"btn btn-dark btn-sm",disabled:r.status.loadingItem===t.id,onClick:(0,l.D$)(a=>e.$emit("add-to-cart",t.id,a),["stop"])},[r.status.loadingItem===t.id?((0,i.uX)(),(0,i.CE)("span",Z)):((0,i.uX)(),(0,i.CE)("span",ee,"加到購物車"))],8,J)])])],8,q)]),_:2},1024))),128))]),_:1},8,["breakpoints"])])}var ae=a(953);
/**
 * Vue 3 Carousel 0.16.0
 * (c) 2025
 * @license MIT
 */
const ie=["viewport","carousel"],ne={"bottom-to-top":"btt","left-to-right":"ltr","right-to-left":"rtl","top-to-bottom":"ttb"},le=["ltr","left-to-right","rtl","right-to-left","ttb","top-to-bottom","btt","bottom-to-top"],oe={ariaGallery:"Gallery",ariaNavigateToPage:"Navigate to page {slideNumber}",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",iconArrowDown:"Arrow pointing downwards",iconArrowLeft:"Arrow pointing to the left",iconArrowRight:"Arrow pointing to the right",iconArrowUp:"Arrow pointing upwards",itemXofY:"Item {currentSlide} of {slidesCount}"},re=(Object.values(ne),["slide","fade"]),se=["center","start","end","center-even","center-odd"],ue=10,ce=.08,de={autoplay:0,breakpointMode:ie[0],breakpoints:void 0,dir:le[0],enabled:!0,gap:0,height:"auto",i18n:oe,ignoreAnimations:!1,itemsToScroll:1,itemsToShow:1,modelValue:0,mouseDrag:!0,mouseWheel:!1,pauseAutoplayOnHover:!1,preventExcessiveDragging:!1,slideEffect:re[0],snapAlign:se[0],touchDrag:!0,transition:300,wrapAround:!1},ve=Symbol("carousel"),he=e=>{const t=(0,ae.Gc)([]),a=e=>{void 0!==e?t.slice(e).forEach((t,a)=>{var i;null===(i=t.exposed)||void 0===i||i.setIndex(e+a)}):t.forEach((e,t)=>{var a;null===(a=e.exposed)||void 0===a||a.setIndex(t)})};return{cleanup:()=>{t.splice(0,t.length)},getSlides:()=>t,registerSlide:(i,n)=>{if(!i)return;if(i.props.isClone)return;const l=null!==n&&void 0!==n?n:t.length;t.splice(l,0,i),a(l),e("slide-registered",{slide:i,index:l})},unregisterSlide:i=>{const n=t.indexOf(i);-1!==n&&(e("slide-unregistered",{slide:i,index:n}),t.splice(n,1),a(n))}}};function pe(e){if(0===e.length)return 0;const t=e.reduce((e,t)=>e+t,0);return t/e.length}function ge({slides:e,position:t,toShow:a}){const n=[],l="before"===t,o=l?-a:0,r=l?0:a;if(e.length<=0)return n;for(let s=o;s<r;s++){const a=l?s:s+e.length,o={index:a,isClone:!0,id:void 0,key:`clone-${t}-${s}`},r=e[(s%e.length+e.length)%e.length].vnode,u=(0,i.E3)(r,o);u.el=null,n.push(u)}return n}const me='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';function fe(e){if(!e.el||!(e.el instanceof Element))return;const t=e.el.querySelectorAll(me);for(const a of t)a instanceof HTMLElement&&!a.hasAttribute("disabled")&&"true"!==a.getAttribute("aria-hidden")&&a.setAttribute("tabindex","-1")}function be(e,t){return Object.keys(e).filter(e=>!t.includes(e)).reduce((t,a)=>(t[a]=e[a],t),{})}function we(e){const{isVertical:t,isReversed:a,dragged:i,effectiveSlideSize:n,threshold:l}=e,o=t?i.y:i.x;if(0===o)return 0;const r=o/n,s=Math.abs(r);if(s<l)return 0;const u=s<1?Math.sign(r):Math.round(r);return a?u:-u}function ye({val:e,max:t,min:a}){return t<a?e:Math.min(Math.max(e,isNaN(a)?e:a),isNaN(t)?e:t)}function ke(e){const{transform:t}=window.getComputedStyle(e);return t.split(/[(,)]/).slice(1,-1).map(e=>parseFloat(e))}function xe(e){let t=1,a=1;return e.forEach(e=>{const i=ke(e);6===i.length&&(t/=i[0],a/=i[3])}),{widthMultiplier:t,heightMultiplier:a}}function Se(e,t){switch(e){case"start":return 0;case"center":case"center-odd":return(t-1)/2;case"center-even":return(t-2)/2;case"end":return t-1;default:return 0}}function Ce(e,t,a){switch(e){case"start":return 0;case"center":case"center-odd":return(a-t)/2;case"center-even":return a/2-t;case"end":return a-t;default:return 0}}function Le({slideSize:e,viewportSize:t,align:a,itemsToShow:i}){return void 0!==i?Se(a,i):void 0!==e&&void 0!==t?Ce(a,e,t):0}function Ee(e="",t={}){return Object.entries(t).reduce((e,[t,a])=>e.replace(`{${t}}`,String(a)),e)}function _e({val:e,max:t,min:a=0}){const i=t-a+1;return((e-a)%i+i)%i+a}function Ae(e,t=0){let a=!1,i=0,n=null;function l(...l){if(a)return;a=!0;const o=()=>{n=requestAnimationFrame(n=>{const r=n-i;r>t?(i=n,e(...l),a=!1):o()})};o()}return l.cancel=()=>{n&&(cancelAnimationFrame(n),n=null,a=!1)},l}function Te(e,t="px"){if(null!==e&&void 0!==e&&""!==e)return"number"===typeof e||parseFloat(e).toString()===e?`${e}${t}`:e}const We=(0,i.pM)({name:"CarouselAria",setup(){const e=(0,i.WQ)(ve);return e?()=>(0,i.h)("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},Ee(e.config.i18n["itemXofY"],{currentSlide:e.currentSlide+1,slidesCount:e.slidesCount})):()=>""}});function Ie(e){let t=!1;const a={x:0,y:0},n=(0,ae.Kh)({x:0,y:0}),l=(0,ae.KR)(!1),{isSliding:o}=e,r=(0,i.EW)(()=>"boolean"===typeof o?o:o.value),s=i=>{var n;const l=i.target.tagName;if(["INPUT","TEXTAREA","SELECT"].includes(l)||r.value)return;if(t="touchstart"===i.type,t&&i.touches.length>1)return;if(!t&&(i.preventDefault(),0!==i.button))return;a.x=t?i.touches[0].clientX:i.clientX,a.y=t?i.touches[0].clientY:i.clientY;const o=t?"touchmove":"mousemove",s=t?"touchend":"mouseup";document.addEventListener(o,u,{passive:!1}),document.addEventListener(s,c,{passive:!0}),null===(n=e.onDragStart)||void 0===n||n.call(e)},u=Ae(i=>{var o;if(t&&i.touches.length>1)return;l.value=!0;const r=t?i.touches[0].clientX:i.clientX,s=t?i.touches[0].clientY:i.clientY;n.x=r-a.x,n.y=s-a.y,null===(o=e.onDrag)||void 0===o||o.call(e,{deltaX:n.x,deltaY:n.y,isTouch:t})}),c=()=>{var a;u.cancel();const i=Math.abs(n.x)+Math.abs(n.y);!t&&i>10&&window.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation()},{once:!0,capture:!0}),null===(a=e.onDragEnd)||void 0===a||a.call(e),n.x=0,n.y=0,l.value=!1;const o=t?"touchmove":"mousemove",r=t?"touchend":"mouseup";document.removeEventListener(o,u),document.removeEventListener(r,c)};return{dragged:n,isDragging:l,handleDragStart:s}}function Me(){const e=(0,ae.KR)(!1),t=()=>{e.value=!0},a=()=>{e.value=!1};return{isHover:e,handleMouseEnter:t,handleMouseLeave:a}}function $e(e){const{isVertical:t,isSliding:a,config:n}=e,l=(0,i.EW)(()=>"boolean"===typeof t?t:t.value),o=(0,i.EW)(()=>"boolean"===typeof a?a:a.value),r=t=>{var a,i;if(t.preventDefault(),!n.mouseWheel||o.value)return;const r="object"===typeof n.mouseWheel&&null!==(a=n.mouseWheel.threshold)&&void 0!==a?a:ue,s=Math.abs(t.deltaY)>r?t.deltaY:0,u=Math.abs(t.deltaX)>r?t.deltaX:0;if(0===s&&0===u)return;const c=l.value?s:u,d=0!==c?c:l.value?u:s,v=d>0;null===(i=e.onWheel)||void 0===i||i.call(e,{deltaX:u,deltaY:s,isScrollingForward:v})};return{handleScroll:r}}const Ne={autoplay:{default:de.autoplay,type:Number},breakpoints:{default:de.breakpoints,type:Object},breakpointMode:{default:de.breakpointMode,validator(e){return ie.includes(e)}},clamp:{type:Boolean},dir:{type:String,default:de.dir,validator(e,t){if(!le.includes(e))return!1;const a=e in ne?ne[e]:e;return!["ttb","btt"].includes(a)||t.height&&"auto"!==t.height||console.warn(`[vue3-carousel]: The dir "${e}" is not supported with height "auto".`),!0}},enabled:{default:de.enabled,type:Boolean},gap:{default:de.gap,type:Number},height:{default:de.height,type:[Number,String]},i18n:{default:de.i18n,type:Object},ignoreAnimations:{default:!1,type:[Array,Boolean,String]},itemsToScroll:{default:de.itemsToScroll,type:Number},itemsToShow:{default:de.itemsToShow,type:[Number,String]},modelValue:{default:void 0,type:Number},mouseDrag:{default:de.mouseDrag,type:[Boolean,Object]},mouseWheel:{default:de.mouseWheel,type:[Boolean,Object]},mouseScrollThreshold:{default:de.mouseScrollThreshold,type:Number},pauseAutoplayOnHover:{default:de.pauseAutoplayOnHover,type:Boolean},preventExcessiveDragging:{default:!1,type:Boolean,validator(e,t){return e&&t.wrapAround&&console.warn('[vue3-carousel]: "preventExcessiveDragging" cannot be used with wrapAround. The setting will be ignored.'),!0}},slideEffect:{type:String,default:de.slideEffect,validator(e){return re.includes(e)}},snapAlign:{default:de.snapAlign,validator(e){return se.includes(e)}},touchDrag:{default:de.touchDrag,type:[Boolean,Object]},transition:{default:de.transition,type:Number},wrapAround:{default:de.wrapAround,type:Boolean}},De=(0,i.pM)({name:"VueCarousel",props:Ne,emits:["before-init","drag","init","loop","slide-end","slide-registered","slide-start","slide-unregistered","update:modelValue","wheel"],setup(e,{slots:t,emit:a,expose:n}){var l;const o=he(a),r=o.getSlides(),s=(0,i.EW)(()=>r.length),u=(0,ae.KR)(null),c=(0,ae.KR)(null),d=(0,ae.KR)(0),v=(0,i.EW)(()=>Object.assign(Object.assign(Object.assign({},de),be(e,["breakpoints","modelValue"])),{i18n:Object.assign(Object.assign({},de.i18n),e.i18n)})),h=(0,ae.Gc)(Object.assign({},v.value)),p=(0,ae.KR)(null!==(l=e.modelValue)&&void 0!==l?l:0),g=(0,ae.KR)(p.value);(0,i.wB)(p,e=>g.value=e);const m=(0,ae.KR)(0),f=(0,i.EW)(()=>Math.ceil((s.value-1)/2)),b=(0,i.EW)(()=>s.value-1),w=(0,i.EW)(()=>0);let y=null,k=null,x=null;const S=(0,i.EW)(()=>d.value+h.gap),C=(0,i.EW)(()=>{const e=h.dir||"ltr";return e in ne?ne[e]:e}),L=(0,i.EW)(()=>["rtl","btt"].includes(C.value)),E=(0,i.EW)(()=>["ttb","btt"].includes(C.value)),_=(0,i.EW)(()=>"auto"===h.itemsToShow),A=(0,i.EW)(()=>E.value?"height":"width");function T(){var t;if(!P.value)return;const a=("carousel"===v.value.breakpointMode?null===(t=u.value)||void 0===t?void 0:t.getBoundingClientRect().width:"undefined"!==typeof window?window.innerWidth:0)||0,i=Object.keys(e.breakpoints||{}).map(e=>Number(e)).sort((e,t)=>+t-+e),n={};i.some(t=>a>=t&&(Object.assign(n,e.breakpoints[t]),n.i18n&&Object.assign(n.i18n,v.value.i18n,e.breakpoints[t].i18n),!0)),Object.assign(h,v.value,n),_.value||(h.itemsToShow=ye({val:Number(h.itemsToShow),max:e.clamp?s.value:1/0,min:1}))}const W=Ae(()=>{T(),R(),j()}),I=(0,ae.Gc)(new Set),M=(0,ae.KR)([]);function $({widthMultiplier:e,heightMultiplier:t}){M.value=r.map(a=>{var i;const n=null===(i=a.exposed)||void 0===i?void 0:i.getBoundingRect();return{width:n.width*e,height:n.height*t}})}const N=(0,ae.KR)({width:0,height:0});function D({widthMultiplier:e,heightMultiplier:t}){var a;const i=(null===(a=c.value)||void 0===a?void 0:a.getBoundingClientRect())||{width:0,height:0};N.value={width:i.width*e,height:i.height*t}}function j(){if(!c.value)return;const e=xe(I);if(D(e),$(e),_.value)d.value=pe(M.value.map(e=>e[A.value]));else{const e=Number(h.itemsToShow),t=(e-1)*h.gap;d.value=(N.value[A.value]-t)/e}}function R(){!h.wrapAround&&s.value>0&&(p.value=ye({val:p.value,max:b.value,min:w.value}))}const O=(0,i.EW)(()=>"string"===typeof e.ignoreAnimations?e.ignoreAnimations.split(","):Array.isArray(e.ignoreAnimations)?e.ignoreAnimations:!e.ignoreAnimations&&[]);let F;(0,i.nT)(()=>R()),(0,i.nT)(()=>{j()});const B=e=>{const t=e.target;if(!(!(null===t||void 0===t?void 0:t.contains(u.value))||Array.isArray(O.value)&&O.value.includes(e.animationName))&&(I.add(t),!F)){const e=()=>{F=requestAnimationFrame(()=>{j(),e()})};e()}},X=e=>{const t=e.target;t&&I.delete(t),F&&0===I.size&&(cancelAnimationFrame(F),j())},P=(0,ae.KR)(!1);"undefined"!==typeof document&&(0,i.nT)(()=>{P.value&&!1!==O.value?(document.addEventListener("animationstart",B),document.addEventListener("animationend",X)):(document.removeEventListener("animationstart",B),document.removeEventListener("animationend",X))}),(0,i.sV)(()=>{P.value=!0,T(),U(),u.value&&(x=new ResizeObserver(W),x.observe(u.value)),a("init")}),(0,i.xo)(()=>{P.value=!1,o.cleanup(),k&&clearTimeout(k),F&&cancelAnimationFrame(F),y&&clearInterval(y),x&&(x.disconnect(),x=null),"undefined"!==typeof document&&Q(),u.value&&(u.value.removeEventListener("transitionend",j),u.value.removeEventListener("animationiteration",j))});const{isHover:K,handleMouseEnter:z,handleMouseLeave:q}=Me(),V=Ae(e=>{if(!e.ctrlKey)switch(e.key){case"ArrowLeft":case"ArrowUp":E.value===e.key.endsWith("Up")&&(L.value?se(!0):ue(!0));break;case"ArrowRight":case"ArrowDown":E.value===e.key.endsWith("Down")&&(L.value?ue(!0):se(!0));break}},200),Q=()=>{document.removeEventListener("keydown",V)},Y=()=>{document.addEventListener("keydown",V)};function U(){!h.autoplay||h.autoplay<=0||(y=setInterval(()=>{h.pauseAutoplayOnHover&&K.value||se()},h.autoplay))}function G(){H(),U()}function H(){y&&(clearInterval(y),y=null)}const J=(0,ae.KR)(!1),Z=({deltaX:e,deltaY:t,isTouch:i})=>{var n,l,o,r;a("drag",{deltaX:e,deltaY:t});const s=i?"object"===typeof h.touchDrag&&null!==(l=null===(n=h.touchDrag)||void 0===n?void 0:n.threshold)&&void 0!==l?l:ce:"object"===typeof h.mouseDrag&&null!==(r=null===(o=h.mouseDrag)||void 0===o?void 0:o.threshold)&&void 0!==r?r:ce,u=we({isVertical:E.value,isReversed:L.value,dragged:{x:e,y:t},effectiveSlideSize:S.value,threshold:s});0!==u&&(g.value=h.wrapAround?p.value+u:ye({val:p.value+u,max:b.value,min:w.value}))},ee=()=>me(g.value),{dragged:te,isDragging:ie,handleDragStart:le}=Ie({isSliding:J,onDrag:Z,onDragEnd:ee}),oe=({deltaX:e,deltaY:t,isScrollingForward:i})=>{a("wheel",{deltaX:e,deltaY:t}),i?L.value?ue():se():L.value?se():ue()},{handleScroll:re}=$e({isVertical:E,isSliding:J,config:h,onWheel:oe});function se(e=!1){me(p.value+h.itemsToScroll,e)}function ue(e=!1){me(p.value-h.itemsToScroll,e)}function me(e,t=!1){if(!t&&J.value)return;const i=(h.wrapAround?_e:ye)({val:e,max:b.value,min:w.value});if(p.value===i)return;m.value=p.value,a("slide-start",{slidingToIndex:e,currentSlideIndex:p.value,prevSlideIndex:m.value,slidesCount:s.value}),H(),J.value=!0,p.value=e,i!==e&&ke.pause(),a("update:modelValue",i);const n=()=>{h.wrapAround&&i!==e&&(ke.resume(),p.value=i,a("loop",{currentSlideIndex:p.value,slidingToIndex:e})),a("slide-end",{currentSlideIndex:p.value,prevSlideIndex:m.value,slidesCount:s.value}),J.value=!1,G()};k=setTimeout(n,h.transition)}function fe(){T(),R(),j(),G()}(0,i.wB)(()=>[v.value,e.breakpoints],()=>T(),{deep:!0}),(0,i.wB)(()=>e.autoplay,()=>G());const ke=(0,i.wB)(()=>e.modelValue,e=>{e!==p.value&&me(Number(e),!0)});a("before-init");const Se=(0,i.EW)(()=>{if(!h.wrapAround)return{before:0,after:0};if(_.value)return{before:r.length,after:r.length};const e=Number(h.itemsToShow),t=Math.ceil(e+(h.itemsToScroll-1)),a=t-g.value,i=t-(s.value-(g.value+1));return{before:Math.max(0,a),after:Math.max(0,i)}}),Ce=(0,i.EW)(()=>Se.value.before?_.value?-1*M.value.slice(-1*Se.value.before).reduce((e,t)=>e+t[A.value]+h.gap,0):Se.value.before*S.value*-1:0),Ee=(0,i.EW)(()=>{var e;if(_.value){const t=(p.value%r.length+r.length)%r.length;return Le({slideSize:null===(e=M.value[t])||void 0===e?void 0:e[A.value],viewportSize:N.value[A.value],align:h.snapAlign})}return Le({align:h.snapAlign,itemsToShow:+h.itemsToShow})}),Ne=(0,i.EW)(()=>{let e=0;if(_.value){if(e=p.value<0?-1*M.value.slice(p.value).reduce((e,t)=>e+t[A.value]+h.gap,0):M.value.slice(0,p.value).reduce((e,t)=>e+t[A.value]+h.gap,0),e-=Ee.value,!h.wrapAround){const t=M.value.reduce((e,t)=>e+t[A.value]+h.gap,0)-N.value[A.value]-h.gap;e=ye({val:e,max:t,min:0})}}else{let t=p.value-Ee.value;h.wrapAround||(t=ye({val:t,max:s.value-+h.itemsToShow,min:0})),e=t*S.value}return e*(L.value?1:-1)}),De=(0,i.EW)(()=>{var e,t;if(!_.value){const e=p.value-Ee.value;return h.wrapAround?{min:Math.floor(e),max:Math.ceil(e+Number(h.itemsToShow)-1)}:{min:Math.floor(ye({val:e,max:s.value-Number(h.itemsToShow),min:0})),max:Math.ceil(ye({val:e+Number(h.itemsToShow)-1,max:s.value-1,min:0}))}}let a=0;{let t=0,i=0-Se.value.before;const n=Math.abs(Ne.value+Ce.value);while(t<=n){const a=(i%r.length+r.length)%r.length;t+=(null===(e=M.value[a])||void 0===e?void 0:e[A.value])+h.gap,i++}a=i-1}let i=0;{let e=a,n=0;n=e<0?M.value.slice(0,e).reduce((e,t)=>e+t[A.value]+h.gap,0)-Math.abs(Ne.value+Ce.value):M.value.slice(0,e).reduce((e,t)=>e+t[A.value]+h.gap,0)-Math.abs(Ne.value);while(n<N.value[A.value]){const a=(e%r.length+r.length)%r.length;n+=(null===(t=M.value[a])||void 0===t?void 0:t[A.value])+h.gap,e++}i=e-1}return{min:Math.floor(a),max:Math.ceil(i)}}),je=(0,i.EW)(()=>{if("fade"===h.slideEffect)return;const e=E.value?"Y":"X",t=E.value?te.y:te.x;let a=Ne.value+t;if(!h.wrapAround&&h.preventExcessiveDragging){let e=0;e=_.value?M.value.reduce((e,t)=>e+t[A.value],0):(s.value-Number(h.itemsToShow))*S.value;const t=L.value?0:-1*e,i=L.value?e:0;a=ye({val:a,min:t,max:i})}return`translate${e}(${a}px)`}),Re=(0,i.EW)(()=>({"--vc-carousel-height":Te(h.height),"--vc-cloned-offset":Te(Ce.value),"--vc-slide-gap":Te(h.gap),"--vc-transition-duration":J.value?Te(h.transition,"ms"):void 0})),Oe={slideTo:me,next:se,prev:ue},Fe=(0,ae.Kh)({activeSlide:g,config:h,currentSlide:p,isSliding:J,isVertical:E,maxSlide:b,minSlide:w,nav:Oe,normalizedDir:C,slideRegistry:o,slideSize:d,slides:r,slidesCount:s,viewport:c,visibleRange:De});(0,i.Gt)(ve,Fe);const Be=(0,ae.Kh)({config:h,currentSlide:p,maxSlide:b,middleSlide:f,minSlide:w,slideSize:d,slidesCount:s});return n((0,ae.Kh)(Object.assign({data:Be,next:se,prev:ue,restartCarousel:fe,slideTo:me,updateBreakpointsConfig:T,updateSlideSize:j,updateSlidesData:R},(0,ae.QW)(Fe)))),()=>{var e;const a=t.default||t.slides,n=(null===a||void 0===a?void 0:a(Be))||[],{before:l,after:o}=Se.value,s=ge({slides:r,position:"before",toShow:l}),d=ge({slides:r,position:"after",toShow:o}),v=[...s,...n,...d];if(!h.enabled||!v.length)return(0,i.h)("section",{ref:u,class:["carousel","is-disabled"]},v);const p=(null===(e=t.addons)||void 0===e?void 0:e.call(t,Be))||[],g=(0,i.h)("ol",{class:"carousel__track",onMousedownCapture:h.mouseDrag?le:null,onTouchstartPassiveCapture:h.touchDrag?le:null,onWheel:h.mouseWheel?re:null,style:{transform:je.value}},v),m=(0,i.h)("div",{class:"carousel__viewport",ref:c},g);return(0,i.h)("section",{ref:u,class:["carousel",`is-${C.value}`,`is-effect-${h.slideEffect}`,{"is-dragging":ie.value,"is-hover":K.value,"is-sliding":J.value,"is-vertical":E.value}],dir:C.value,style:Re.value,"aria-label":h.i18n["ariaGallery"],tabindex:"0",onBlur:Q,onFocus:Y,onMouseenter:z,onMouseleave:q},[m,p,(0,i.h)(We)])}}});var je;(function(e){e["arrowDown"]="arrowDown",e["arrowLeft"]="arrowLeft",e["arrowRight"]="arrowRight",e["arrowUp"]="arrowUp"})(je||(je={}));const Re=e=>`icon${e.charAt(0).toUpperCase()+e.slice(1)}`,Oe={arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"};function Fe(e){return e in je}const Be=e=>e&&Fe(e),Xe=(0,i.pM)({props:{name:{type:String,required:!0,validator:Be},title:{type:String,default:e=>e.name?de.i18n[Re(e.name)]:""}},setup(e){const t=(0,i.WQ)(ve,null);return()=>{const a=e.name;if(!a||!Be(a))return;const n=Oe[a],l=(0,i.h)("path",{d:n}),o=(null===t||void 0===t?void 0:t.config.i18n[Re(a)])||e.title,r=(0,i.h)("title",o);return(0,i.h)("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":o},[r,l])}}}),Pe=(0,i.pM)({name:"CarouselNavigation",inheritAttrs:!1,props:{carousel:{type:Object}},setup(e,{slots:t,attrs:a}){let n=(0,i.WQ)(ve,null);const{next:l,prev:o}=t,r=()=>{const e={btt:"arrowDown",ltr:"arrowLeft",rtl:"arrowRight",ttb:"arrowUp"};return e[n.normalizedDir]},s=()=>{const e={btt:"arrowUp",ltr:"arrowRight",rtl:"arrowLeft",ttb:"arrowDown"};return e[n.normalizedDir]},u=(0,i.EW)(()=>!n.config.wrapAround&&n.currentSlide<=n.minSlide),c=(0,i.EW)(()=>!n.config.wrapAround&&n.currentSlide>=n.maxSlide);return()=>{if(e.carousel&&(n=e.carousel),!n)return console.warn("[vue3-carousel]: A carousel component must be provided for the navigation component to display"),"";const{i18n:t}=n.config,d=(0,i.h)("button",Object.assign(Object.assign({type:"button",disabled:u.value,"aria-label":t["ariaPreviousSlide"],title:t["ariaPreviousSlide"],onClick:n.nav.prev},a),{class:["carousel__prev",{"carousel__prev--disabled":u.value},a.class]}),(null===o||void 0===o?void 0:o())||(0,i.h)(Xe,{name:r()})),v=(0,i.h)("button",Object.assign(Object.assign({type:"button",disabled:c.value,"aria-label":t["ariaNextSlide"],title:t["ariaNextSlide"],onClick:n.nav.next},a),{class:["carousel__next",{"carousel__next--disabled":c.value},a.class]}),(null===l||void 0===l?void 0:l())||(0,i.h)(Xe,{name:s()}));return[d,v]}}}),Ke=(0,i.pM)({name:"CarouselPagination",props:{disableOnClick:{type:Boolean},paginateByItemsToShow:{type:Boolean},carousel:{type:Object}},setup(e){let t=(0,i.WQ)(ve,null);const a=(0,i.EW)(()=>t.config.itemsToShow),n=(0,i.EW)(()=>Le({align:t.config.snapAlign,itemsToShow:a.value})),l=(0,i.EW)(()=>e.paginateByItemsToShow&&a.value>1),o=(0,i.EW)(()=>Math.ceil((t.activeSlide-n.value)/a.value)),r=(0,i.EW)(()=>Math.ceil(t.slidesCount/a.value)),s=e=>_e(l.value?{val:o.value,max:r.value-1,min:0}:{val:t.activeSlide,max:t.maxSlide,min:t.minSlide})===e;return()=>{var a,o;if(e.carousel&&(t=e.carousel),!t)return console.warn("[vue3-carousel]: A carousel component must be provided for the pagination component to display"),"";const u=[];for(let c=l.value?0:t.minSlide;c<=(l.value?r.value-1:t.maxSlide);c++){const r=Ee(t.config.i18n[l.value?"ariaNavigateToPage":"ariaNavigateToSlide"],{slideNumber:c+1}),d=s(c),v=(0,i.h)("button",{type:"button",class:{"carousel__pagination-button":!0,"carousel__pagination-button--active":d},"aria-label":r,"aria-pressed":d,"aria-controls":null===(o=null===(a=t.slides[c])||void 0===a?void 0:a.exposed)||void 0===o?void 0:o.id,title:r,disabled:e.disableOnClick,onClick:()=>t.nav.slideTo(l.value?Math.floor(c*+t.config.itemsToShow+n.value):c)}),h=(0,i.h)("li",{class:"carousel__pagination-item",key:c},v);u.push(h)}return(0,i.h)("ol",{class:"carousel__pagination"},u)}}}),ze=(0,i.pM)({name:"CarouselSlide",props:{id:{type:String,default:e=>e.isClone?void 0:(0,i.Bi)()},index:{type:Number,default:void 0},isClone:{type:Boolean,default:!1}},setup(e,{attrs:t,slots:a,expose:n}){const l=(0,i.WQ)(ve);if((0,i.Gt)(ve,void 0),!l)return()=>"";const o=(0,ae.KR)(e.index),r=e=>{o.value=e},s=(0,i.nI)(),u=()=>{const e=s.vnode.el;return e?e.getBoundingClientRect():{width:0,height:0}};n({id:e.id,setIndex:r,getBoundingRect:u});const c=(0,i.EW)(()=>o.value===l.activeSlide),d=(0,i.EW)(()=>o.value===l.activeSlide-1),v=(0,i.EW)(()=>o.value===l.activeSlide+1),h=(0,i.EW)(()=>o.value>=l.visibleRange.min&&o.value<=l.visibleRange.max),p=(0,i.EW)(()=>{if("auto"===l.config.itemsToShow)return;const e=l.config.itemsToShow,t=l.config.gap>0&&e>1?`calc(${100/e}% - ${l.config.gap*(e-1)/e}px)`:100/e+"%";return l.isVertical?{height:t}:{width:t}});return l.slideRegistry.registerSlide(s,e.index),(0,i.hi)(()=>{l.slideRegistry.unregisterSlide(s)}),e.isClone&&((0,i.sV)(()=>{fe(s.vnode)}),(0,i.$u)(()=>{fe(s.vnode)})),()=>{var n,r;return l.config.enabled?(0,i.h)("li",{style:[t.style,Object.assign({},p.value)],class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":h.value,"carousel__slide--active":c.value,"carousel__slide--prev":d.value,"carousel__slide--next":v.value,"carousel__slide--sliding":l.isSliding},onFocusin:()=>{l.viewport&&(l.viewport.scrollLeft=0),l.nav.slideTo(o.value)},id:e.isClone?void 0:e.id,"aria-hidden":e.isClone||void 0},null===(r=a.default)||void 0===r?void 0:r.call(a,{currentIndex:o.value,isActive:c.value,isClone:e.isClone,isPrev:d.value,isNext:v.value,isSliding:l.isSliding,isVisible:h.value})):null===(n=a.default)||void 0===n?void 0:n.call(a)}}});var qe={name:"ProductCarousel",components:{Carousel:De,Slide:ze,Navigation:Pe,Pagination:Ke},props:{products:{type:Array,required:!0},cartIconRef:{type:Object,default:null}},data(){return{status:{loadingItem:""},cart:[],isLoading:!1,showCartPreview:!1,breakpoints:{0:{itemsToShow:1},768:{itemsToShow:1},1024:{itemsToShow:3}}}},setup(){const e=(0,ae.KR)(null);function t(e){return e||0===e?new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(e):"NT$ 0"}return{carousel:e,formatCurrency:t}},mounted(){},methods:{getProduct(e){this.$router.push(`/user/product/${e}`)},animateToCart(e){try{const t=e.currentTarget.closest(".card"),a=t?.querySelector(".card-img-top"),i=this.cartIconRef||this.$refs.cartIcon;if(!a||!i)return void console.warn("動畫失敗：無法找到圖片或購物車圖示（請在購物車圖示加上 ref='cartIcon'）");const n=a.cloneNode(!0),l=a.getBoundingClientRect(),o=i.getBoundingClientRect();n.style.position="fixed",n.style.left=`${l.left}px`,n.style.top=`${l.top}px`,n.style.width=`${l.width}px`,n.style.height=`${l.height}px`,n.style.zIndex=1e3,n.style.transition="all 0.8s ease-in-out",document.body.appendChild(n),requestAnimationFrame(()=>{n.style.left=`${o.left}px`,n.style.top=`${o.top}px`,n.style.width="0px",n.style.height="0px",n.style.opacity="0.5"}),n.addEventListener("transitionend",()=>{n.remove()})}catch(t){console.error("animateToCart error:",t)}},getCart(){const e="https://vue3-course-api.hexschool.io/api/lienjackson/cart";this.isLoading=!0,this.$http.get(e).then(e=>{e.data&&e.data.data&&Array.isArray(e.data.data.carts)?this.cart=e.data.data.carts:this.cart=[],this.isLoading=!1}).catch(()=>{this.cart=[],this.isLoading=!1})},addCart(e,t){const a="https://vue3-course-api.hexschool.io/api/lienjackson/cart";this.status.loadingItem=e;const i={product_id:e,qty:1};this.animateToCart(t),this.$http.post(a,{data:i}).then(()=>{this.status.loadingItem="";const t=this.cart.find(t=>t.product_id===e||t.product.id===e);t?t.qty+=1:this.cart.push({id:Date.now(),product_id:e,qty:1,product:this.products.find(t=>t.id===e)||{}}),this.getCart()}).catch(()=>{this.status.loadingItem="",alert("加入購物車失敗，請稍後再試")})},removeCartItem(e){const t=`https://vue3-course-api.hexschool.io/api/lienjackson/cart/${e}`;this.$http.delete(t).then(()=>{this.cart=this.cart.filter(t=>t.id!==e)}).catch(()=>{alert("刪除商品失敗，請稍後再試")})},handleOutsideClick(e){const t=this.$refs.cartIcon;t&&!t.contains(e.target)&&(this.showCartPreview=!1)}}};const Ve=(0,X.A)(qe,[["render",te],["__scopeId","data-v-181c7e1e"]]);var Qe=Ve,Ye=a(1600),Ue={data(){return{products:[],isLoading:!1,cart:[],status:{loadingItem:""},showCartPreview:!1}},computed:{cartQty(){return this.cart.reduce((e,t)=>e+t.qty,0)},cartItems(){return this.cart},cartIconEvents(){return{mouseenter:()=>{this.showCartPreview=!0},mouseleave:()=>{this.showCartPreview=!1}}}},components:{TitleList:K,ProductCarousel:Qe},methods:{getProducts(){const e="https://vue3-course-api.hexschool.io/api/lienjackson/products/all";this.isLoading=!0,this.$http.get(e).then(e=>{this.products=e.data.products,this.isLoading=!1})},getProduct(e){this.$router.push(`/user/product/${e}`)},animateToCart(e){const t=e.target.closest(".card"),a=t?.querySelector(".card-img-top"),i=this.$refs.cartIcon;if(!a||!i)return void console.warn("動畫失敗：無法找到圖片或購物車圖示");const n=a.cloneNode(!0),l=a.getBoundingClientRect(),o=i.getBoundingClientRect();n.style.position="fixed",n.style.left=`${l.left}px`,n.style.top=`${l.top}px`,n.style.width=`${l.width}px`,n.style.height=`${l.height}px`,n.style.zIndex=1e3,n.style.transition="all 0.8s ease-in-out",document.body.appendChild(n),requestAnimationFrame(()=>{n.style.left=`${o.left}px`,n.style.top=`${o.top}px`,n.style.width="0px",n.style.height="0px",n.style.opacity="0.5"}),n.addEventListener("transitionend",()=>{n.remove()})},addCart(e,t){const a="https://vue3-course-api.hexschool.io/api/lienjackson/cart";this.status.loadingItem=e;const i={product_id:e,qty:1};this.animateToCart(t),this.$http.post(a,{data:i}).then(()=>{this.status.loadingItem="",this.getCart()}).catch(()=>{this.status.loadingItem="",alert("加入購物車失敗，請稍後再試")})},getCart(){const e="https://vue3-course-api.hexschool.io/api/lienjackson/cart";this.isLoading=!0,this.$http.get(e).then(e=>{e.data&&e.data.data&&Array.isArray(e.data.data.carts)?this.cart=e.data.data.carts:this.cart=[],this.isLoading=!1}).catch(()=>{this.cart=[],this.isLoading=!1})},removeCartItem(e){const t=`https://vue3-course-api.hexschool.io/api/lienjackson/cart/${e}`;this.$http.delete(t).then(()=>{this.cart=this.cart.filter(t=>t.id!==e)}).catch(()=>{alert("刪除商品失敗，請稍後再試")})},handleOutsideClick(e){const t=this.$refs.cartIcon;t&&!t.contains(e.target)&&(this.showCartPreview=!1)}},mounted(){document.addEventListener("click",this.handleOutsideClick),Ye.A.on("update-cart",this.getCart),this.getProducts(),this.getCart()},beforeUnmount(){document.removeEventListener("click",this.handleOutsideClick),Ye.A.off("update-cart",this.getCart)}};const Ge=(0,X.A)(Ue,[["render",M]]);var He=Ge}}]);
//# sourceMappingURL=170.48c6a693.js.map