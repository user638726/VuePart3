{"version":3,"file":"js/806.81c65470.js","mappings":"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","sources":["webpack://newproject2/./src/views/FrontProducts.vue","webpack://newproject2/./src/views/FrontProducts.vue?6d8d"],"sourcesContent":["<script>\r\nimport emitter from \"@/methods/emitter\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      isLoading: false,\r\n      cart: [],\r\n      status: {\r\n        loadingItem: \"\",\r\n      },\r\n      categories: [\r\n        {\r\n          name: \"籃球\",\r\n          subcategories: [\"攻擊\", \"防守\"],\r\n        },\r\n      ], // <-- 可改成你的實際分類\r\n      selectedCategory: \"\",\r\n      activeCardId: null,\r\n      hoverTimeout: null,\r\n      showCartPreview: false,\r\n      isMobile: false,\r\n    };\r\n  },\r\n  computed: {\r\n    cartQty() {\r\n      return this.cart.reduce((total, item) => total + item.qty, 0);\r\n    },\r\n    filteredProducts() {\r\n      if (!this.selectedCategory) return this.products;\r\n      // 根據商品標題是否包含分類關鍵字進行篩選（不區分大小寫）\r\n      return this.products.filter((product) =>\r\n        product.title\r\n          .toLowerCase()\r\n          .includes(this.selectedCategory.toLowerCase())\r\n      );\r\n    },\r\n    cartItems() {\r\n      return this.cart;\r\n    },\r\n    cartIconEvents() {\r\n      if (this.isMobile) {\r\n        return {\r\n          click: this.toggleCartPreview,\r\n        };\r\n      } else {\r\n        return {\r\n          mouseenter: () => {\r\n            this.showCartPreview = true;\r\n          },\r\n          mouseleave: () => {\r\n            this.showCartPreview = false;\r\n          },\r\n        };\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    getProducts() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((response) => {\r\n        this.products = response.data.products;\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    getProduct(id) {\r\n      this.$router.push(`/user/product/${id}`);\r\n    },\r\n    animateToCart(event) {\r\n      const productCard = event.target.closest(\".card\");\r\n      const productImg = productCard?.querySelector(\".card-img-top\");\r\n      const cartIcon = this.$refs.cartIcon;\r\n\r\n      if (!productImg || !cartIcon) {\r\n        console.warn(\"動畫失敗：無法找到圖片或購物車圖示\");\r\n        return;\r\n      }\r\n\r\n      const imgClone = productImg.cloneNode(true);\r\n      const imgRect = productImg.getBoundingClientRect();\r\n      const cartRect = cartIcon.getBoundingClientRect();\r\n\r\n      imgClone.style.position = \"fixed\";\r\n      imgClone.style.left = `${imgRect.left}px`;\r\n      imgClone.style.top = `${imgRect.top}px`;\r\n      imgClone.style.width = `${imgRect.width}px`;\r\n      imgClone.style.height = `${imgRect.height}px`;\r\n      imgClone.style.zIndex = 1000;\r\n      imgClone.style.transition = \"all 0.8s ease-in-out\";\r\n\r\n      document.body.appendChild(imgClone);\r\n\r\n      requestAnimationFrame(() => {\r\n        imgClone.style.left = `${cartRect.left}px`;\r\n        imgClone.style.top = `${cartRect.top}px`;\r\n        imgClone.style.width = \"0px\";\r\n        imgClone.style.height = \"0px\";\r\n        imgClone.style.opacity = \"0.5\";\r\n      });\r\n\r\n      imgClone.addEventListener(\"transitionend\", () => {\r\n        imgClone.remove();\r\n      });\r\n    },\r\n    handleCardClick(id) {\r\n      // 如果點的是不同卡片，清除之前的 timeout 並重新 hover\r\n      if (this.activeCardId !== id) {\r\n        clearTimeout(this.hoverTimeout);\r\n        this.activeCardId = id;\r\n\r\n        // 等待 3000ms 再跳轉頁面\r\n        this.hoverTimeout = setTimeout(() => {\r\n          this.getProduct(id);\r\n        }, 1000);\r\n      }\r\n    },\r\n    addCart(id, event) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.status.loadingItem = id;\r\n\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1,\r\n      };\r\n\r\n      this.animateToCart(event);\r\n\r\n      this.$http\r\n        .post(url, { data: cart })\r\n        .then(() => {\r\n          this.status.loadingItem = \"\";\r\n          this.getCart();\r\n        })\r\n        .catch(() => {\r\n          this.status.loadingItem = \"\";\r\n          alert(\"加入購物車失敗，請稍後再試\");\r\n        });\r\n    },\r\n\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.isLoading = true;\r\n      this.$http\r\n        .get(url)\r\n        .then((res) => {\r\n          // 假設購物車清單在 res.data.data.carts 中\r\n          if (res.data && res.data.data && Array.isArray(res.data.data.carts)) {\r\n            this.cart = res.data.data.carts;\r\n          } else {\r\n            this.cart = [];\r\n          }\r\n          this.isLoading = false;\r\n        })\r\n        .catch(() => {\r\n          this.cart = [];\r\n          this.isLoading = false;\r\n        });\r\n    },\r\n    removeCartItem(id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      this.$http\r\n        .delete(url)\r\n        .then(() => {\r\n          this.cart = this.cart.filter((item) => item.id !== id);\r\n        })\r\n        .catch(() => {\r\n          alert(\"刪除商品失敗，請稍後再試\");\r\n        });\r\n    },\r\n    formatCurrency(num) {\r\n      return `NT$ ${Number(num).toLocaleString()}`;\r\n    },\r\n    toggleCartPreview() {\r\n      this.showCartPreview = !this.showCartPreview;\r\n    },\r\n    handleOutsideClick(event) {\r\n      const cartIcon = this.$refs.cartIcon;\r\n      if (cartIcon && !cartIcon.contains(event.target)) {\r\n        this.showCartPreview = false;\r\n      }\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.getProducts();\r\n    this.getCart();\r\n    this.isMobile = window.innerWidth <= 768; // ✅ 手機裝置判斷\r\n    document.addEventListener(\"click\", this.handleOutsideClick);\r\n    emitter.on(\"update-cart\", this.getCart);\r\n  },\r\n  beforeUnmount() {\r\n    document.removeEventListener(\"click\", this.handleOutsideClick);\r\n    emitter.off(\"update-cart\", this.getCart);\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <nav class=\"navbar navbar-expand-lg bg-dark fixed-top\" data-bs-theme=\"dark\">\r\n    <div class=\"container-fluid\">\r\n      <router-link class=\"navbar-brand\" to=\"/\">籃球瘋</router-link>\r\n      <button\r\n        class=\"navbar-toggler\"\r\n        type=\"button\"\r\n        data-bs-toggle=\"collapse\"\r\n        data-bs-target=\"#navbarText\"\r\n        aria-controls=\"navbarText\"\r\n        aria-expanded=\"false\"\r\n        aria-label=\"Toggle navigation\"\r\n      >\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div class=\"collapse navbar-collapse\" id=\"navbarText\">\r\n        <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n          <li class=\"nav-item\">\r\n            <router-link class=\"nav-link\" to=\"/about\">關於</router-link>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <router-link class=\"nav-link\" to=\"/frontproducts\">產品</router-link>\r\n          </li>\r\n        </ul>\r\n        <span ref=\"cartIcon\" style=\"position: relative\" v-on=\"cartIconEvents\">\r\n          <router-link\r\n            class=\"navbar-text position-relative\"\r\n            to=\"/user/cart\"\r\n            style=\"margin-right: 0.5cm\"\r\n          >\r\n            購物車\r\n            <span\r\n              v-if=\"cartQty > 0\"\r\n              class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\"\r\n            >\r\n              {{ cartQty }}\r\n            </span>\r\n          </router-link>\r\n          <div\r\n            v-if=\"showCartPreview && cartQty > 0\"\r\n            class=\"cart-preview position-absolute bg-white text-dark border rounded shadow\"\r\n            style=\"\r\n              top: 100%;\r\n              right: 0;\r\n              z-index: 2000;\r\n              width: 300px;\r\n              max-height: 350px;\r\n              overflow-y: auto;\r\n            \"\r\n          >\r\n            <div\r\n              v-for=\"item in cartItems\"\r\n              :key=\"item.id\"\r\n              class=\"d-flex align-items-center p-2 border-bottom\"\r\n            >\r\n              <img\r\n                :src=\"item.product.imageUrl\"\r\n                alt=\"商品圖片\"\r\n                class=\"me-2\"\r\n                style=\"width: 50px; height: 50px; object-fit: cover\"\r\n              />\r\n              <div class=\"flex-grow-1\">\r\n                <div class=\"fw-bold\">{{ item.product.title }}</div>\r\n                <div class=\"text-dark small\">數量: {{ item.qty }}</div>\r\n              </div>\r\n              <button\r\n                class=\"btn btn-sm btn-outline-danger ms-2\"\r\n                @click.stop.prevent=\"removeCartItem(item.id)\"\r\n              >\r\n                &times;\r\n              </button>\r\n            </div>\r\n            <div class=\"p-2 text-center\">\r\n              <router-link to=\"/user/cart\" class=\"btn btn-sm btn-dark\"\r\n                >前往購物車</router-link\r\n              >\r\n            </div>\r\n          </div>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n  <div class=\"container\" style=\"padding-top: 80px\">\r\n    <div class=\"row\">\r\n      <!-- 左側：商品分類 -->\r\n      <div class=\"col-md-3 mb-4\">\r\n        <div class=\"p-3 bg-white shadow-sm rounded\">\r\n          <h5 class=\"mb-3\">商品分類</h5>\r\n\r\n          <div v-for=\"mainCategory in categories\" :key=\"mainCategory.name\">\r\n            <strong>{{ mainCategory.name }}</strong>\r\n            <div class=\"d-flex flex-wrap mt-2\">\r\n              <button\r\n                v-for=\"sub in mainCategory.subcategories\"\r\n                :key=\"sub\"\r\n                @click=\"selectedCategory = sub\"\r\n                class=\"category-btn\"\r\n                :class=\"{ active: selectedCategory === sub }\"\r\n              >\r\n                {{ sub }}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            class=\"btn btn-outline-secondary btn-sm mt-4 w-100\"\r\n            @click=\"selectedCategory = ''\"\r\n          >\r\n            清除篩選\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-9\">\r\n        <main style=\"padding-bottom: 100px\">\r\n          <section id=\"products\">\r\n            <h2 class=\"text-center mb-4\">全部商品</h2>\r\n            <div class=\"row\">\r\n              <div\r\n                class=\"col-md-4 mb-4\"\r\n                v-for=\"item in filteredProducts\"\r\n                :key=\"item.id\"\r\n              >\r\n                <div\r\n                  class=\"card h-100\"\r\n                  :class=\"{ active: activeCardId === item.id }\"\r\n                  @click=\"handleCardClick(item.id)\"\r\n                >\r\n                  <div\r\n                    class=\"card-img-top\"\r\n                    :style=\"{\r\n                      height: '200px',\r\n                      backgroundImage: `url(${item.imageUrl})`,\r\n                      backgroundSize: 'cover',\r\n                      backgroundPosition: 'center',\r\n                    }\"\r\n                  ></div>\r\n                  <div class=\"card-body d-flex flex-column\">\r\n                    <h5 class=\"card-title\">{{ item.title }}</h5>\r\n                    <p class=\"card-text mb-2\">\r\n                      <span v-if=\"item.price\">\r\n                        <del class=\"text-muted\"\r\n                          >原價 {{ formatCurrency(item.origin_price) }}</del\r\n                        ><br />\r\n                        <span class=\"h5 text-danger\"\r\n                          >特價 {{ formatCurrency(item.price) }}</span\r\n                        >\r\n                      </span>\r\n                      <span v-else>\r\n                        <span class=\"h5\">{{\r\n                          formatCurrency(item.origin_price)\r\n                        }}</span>\r\n                      </span>\r\n                    </p>\r\n                    <div class=\"mt-auto\">\r\n                      <button\r\n                        type=\"button\"\r\n                        class=\"btn btn-dark btn-sm\"\r\n                        :disabled=\"status.loadingItem === item.id\"\r\n                        @click.stop=\"addCart(item.id, $event)\"\r\n                      >\r\n                        <span\r\n                          v-if=\"status.loadingItem === item.id\"\r\n                          class=\"spinner-border spinner-border-sm text-light\"\r\n                          role=\"status\"\r\n                        ></span>\r\n                        <span v-else>加到購物車</span>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <footer class=\"footer-fixed bg-dark text-white text-center py-3\">\r\n    <p>&copy; 2025 籃球瘋. All rights reserved.</p>\r\n  </footer>\r\n</template>\r\n\r\n<style scoped>\r\n.footer-fixed {\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n  z-index: 999;\r\n}\r\n.card-title {\r\n  font-size: 24px;\r\n}\r\n.text-muted {\r\n  font-size: 16px;\r\n}\r\nhtml {\r\n  scroll-behavior: smooth;\r\n  background-color: #ffffe0;\r\n}\r\n\r\nbody {\r\n  background-color: #ffffe0;\r\n}\r\n.card {\r\n  cursor: pointer;\r\n  transition:\r\n    transform 0.5s ease,\r\n    box-shadow 0.5s ease;\r\n}\r\n.card:hover,\r\n.card.active {\r\n  transform: translateY(-5px) scale(1.02);\r\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n.category-btn {\r\n  border: 1px solid #ccc;\r\n  background-color: #fff;\r\n  color: #333;\r\n  padding: 8px 16px;\r\n  margin: 5px 5px 0 0;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-size: 14px;\r\n}\r\n\r\n.category-btn:hover {\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n.category-btn.active {\r\n  background-color: #343a40;\r\n  color: #fff;\r\n  border-color: #343a40;\r\n}\r\n@media (max-width: 768px) {\r\n  .cart-preview {\r\n    position: fixed !important;\r\n    top: 60px !important;\r\n    right: 10px !important;\r\n    width: 90% !important;\r\n    max-width: 300px;\r\n    max-height: 70vh !important;\r\n    overflow-y: auto;\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./FrontProducts.vue?vue&type=template&id=572cbac9&scoped=true\"\nimport script from \"./FrontProducts.vue?vue&type=script&lang=js\"\nexport * from \"./FrontProducts.vue?vue&type=script&lang=js\"\n\nimport \"./FrontProducts.vue?vue&type=style&index=0&id=572cbac9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-572cbac9\"]])\n\nexport default __exports__"],"names":["class","id","style","role","_createVNode","_component_Loading","active","$data","isLoading","_createElementVNode","_hoisted_1","_hoisted_2","_component_router_link","to","_cache","type","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_mergeProps","ref","_toHandlers","$options","cartIconEvents","cartQty","_createElementBlock","_hoisted_7","_toDisplayString","showCartPreview","_hoisted_8","_Fragment","_renderList","cartItems","item","key","src","product","imageUrl","alt","_hoisted_10","_hoisted_11","title","_hoisted_12","qty","onClick","_withModifiers","$event","removeCartItem","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","categories","mainCategory","name","_hoisted_19","subcategories","sub","selectedCategory","_normalizeClass","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","filteredProducts","activeCardId","handleCardClick","_normalizeStyle","_hoisted_26","_hoisted_27","_hoisted_28","price","_hoisted_29","_hoisted_30","formatCurrency","origin_price","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","disabled","status","loadingItem","addCart","_hoisted_36","_hoisted_37","data","products","cart","hoverTimeout","isMobile","computed","this","reduce","total","filter","toLowerCase","includes","click","toggleCartPreview","mouseenter","mouseleave","methods","getProducts","url","$http","get","then","response","getProduct","$router","push","animateToCart","event","productCard","target","closest","productImg","querySelector","cartIcon","$refs","console","warn","imgClone","cloneNode","imgRect","getBoundingClientRect","cartRect","position","left","top","width","height","zIndex","transition","document","body","appendChild","requestAnimationFrame","opacity","addEventListener","remove","clearTimeout","setTimeout","product_id","post","getCart","catch","alert","res","Array","isArray","carts","delete","num","Number","toLocaleString","handleOutsideClick","contains","mounted","window","innerWidth","emitter","on","beforeUnmount","removeEventListener","off","__exports__","render"],"sourceRoot":""}