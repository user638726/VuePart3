{"version":3,"file":"js/952.13c4c484.js","mappings":"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","sources":["webpack://newproject2/./src/views/Coupons.vue","webpack://newproject2/./src/components/CouponModal.vue","webpack://newproject2/./src/components/CouponModal.vue?3d2f","webpack://newproject2/./src/views/Coupons.vue?be98"],"sourcesContent":["<template>\r\n  <div>\r\n    <Loading :active=\"isLoading\"></Loading>\r\n    <div class=\"text-end mt-4\">\r\n      <button class=\"btn btn-primary\" @click=\"openCouponModal(true)\">\r\n        建立新的優惠券\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n      <tr>\r\n        <th>名稱</th>\r\n        <th>折扣百分比</th>\r\n        <th>到期日</th>\r\n        <th>是否啟用</th>\r\n        <th>編輯</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"(item, key) in coupons\" :key=\"key\">\r\n        <td>{{ item.title }}</td>\r\n        <td>{{ item.percent }}%</td>\r\n        <td>{{ $filters.date(item.due_date) }}</td>\r\n        <td>\r\n          <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\r\n          <span v-else class=\"text-muted\">未起用</span>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group\">\r\n            <button class=\"btn btn-outline-primary btn-sm\"\r\n                    @click=\"openCouponModal(false, item)\"\r\n            >編輯</button>\r\n            <button class=\"btn btn-outline-danger btn-sm\"\r\n                    @click=\"openDelCouponModal(item)\"\r\n            >刪除</button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n    <couponModal :coupon=\"tempCoupon\" ref=\"couponModal\"\r\n    @update-coupon=\"updateCoupon\"/>\r\n    <DelModal :item=\"tempCoupon\" ref=\"delModal\" @del-item=\"delCoupon\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CouponModal from '@/components/CouponModal.vue';\r\nimport DelModal from '@/components/DelModal.vue';\r\n\r\nexport default {\r\n  components: { CouponModal, DelModal },\r\n  props: {\r\n    config: Object,\r\n  },\r\n  data() {\r\n    return {\r\n      coupons: {},\r\n      tempCoupon: {\r\n        title: '',\r\n        is_enabled: 0,\r\n        percent: 100,\r\n        code: '',\r\n      },\r\n      isLoading: false,\r\n      isNew: false,\r\n    };\r\n  },\r\n  methods: {\r\n    openCouponModal(isNew, item) {\r\n      this.isNew = isNew;\r\n      if (this.isNew) {\r\n        this.tempCoupon = {\r\n          due_date: new Date().getTime() / 1000,\r\n        };\r\n      } else {\r\n        this.tempCoupon = { ...item };\r\n      }\r\n      this.$refs.couponModal.showModal();\r\n    },\r\n    openDelCouponModal(item) {\r\n      this.tempCoupon = { ...item };\r\n      const delComponent = this.$refs.delModal;\r\n      delComponent.showModal();\r\n    },\r\n    getCoupons() {\r\n      this.isLoading = true;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons`;\r\n      this.$http.get(url, this.tempProduct).then((response) => {\r\n        this.coupons = response.data.coupons;\r\n        this.isLoading = false;\r\n        console.log(response);\r\n      });\r\n    },\r\n    updateCoupon(tempCoupon) {\r\n      if (this.isNew) {\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\r\n        this.$http.post(url, { data: tempCoupon }).then((response) => {\r\n          console.log(response, tempCoupon);\r\n          this.$httpMessageState(response, '新增優惠券');\r\n          this.getCoupons();\r\n          this.$refs.couponModal.hideModal();\r\n        });\r\n      } else {\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n        this.$http.put(url, { data: this.tempCoupon }).then((response) => {\r\n          console.log(response);\r\n          this.$httpMessageState(response, '新增優惠券');\r\n          this.getCoupons();\r\n          this.$refs.couponModal.hideModal();\r\n        });\r\n      }\r\n    },\r\n    delCoupon() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((response) => {\r\n        console.log(response, this.tempCoupon);\r\n        this.$httpMessageState(response, '刪除優惠券');\r\n        const delComponent = this.$refs.delModal;\r\n        delComponent.hideModal();\r\n        this.getCoupons();\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getCoupons();\r\n  },\r\n};\r\n</script>","<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"couponModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">優惠卷</h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"title\">標題</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"title\"\r\n              v-model=\"tempCoupon.title\"\r\n              placeholder=\"請輸入標題\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"coupon_code\">優惠碼</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"coupon_code\"\r\n              v-model=\"tempCoupon.code\"\r\n              placeholder=\"請輸入優惠碼\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"due_date\">到期日</label>\r\n            <input type=\"date\" class=\"form-control\" id=\"due_date\" v-model=\"due_date\" />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"price\">折扣百分比</label>\r\n            <input\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              id=\"price\"\r\n              v-model.number=\"tempCoupon.percent\"\r\n              placeholder=\"請輸入折扣百分比\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <div class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                :true-value=\"1\"\r\n                :false-value=\"0\"\r\n                v-model=\"tempCoupon.is_enabled\"\r\n                id=\"is_enabled\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"is_enabled\"> 是否啟用 </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"$emit('update-coupon', tempCoupon)\">\r\n            更新優惠券\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport modalMixin from '@/mixins/modalMixin'\r\n\r\nexport default {\r\n  name: 'couponModal',\r\n  props: {\r\n    coupon: {},\r\n  },\r\n  data() {\r\n    return {\r\n      tempCoupon: {},\r\n      due_date: '',\r\n    }\r\n  },\r\n  emits: ['update-coupon'],\r\n  watch: {\r\n    coupon() {\r\n      this.tempCoupon = this.coupon\r\n      // 將時間格式改為 YYYY-MM-DD\r\n      console.log(this.tempCoupon.due_date)\r\n      const dateAndTime = new Date(this.tempCoupon.due_date * 1000).toISOString().split('T')\r\n      ;[this.due_date] = dateAndTime\r\n    },\r\n    due_date() {\r\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000)\r\n    },\r\n  },\r\n  mixins: [modalMixin],\r\n}\r\n</script>\r\n","import { render } from \"./CouponModal.vue?vue&type=template&id=569894c6\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Coupons.vue?vue&type=template&id=032a4052\"\nimport script from \"./Coupons.vue?vue&type=script&lang=js\"\nexport * from \"./Coupons.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createVNode","_component_Loading","active","$data","isLoading","_createElementVNode","_hoisted_1","onClick","_cache","$event","$options","openCouponModal","_hoisted_2","_Fragment","_renderList","coupons","item","key","_toDisplayString","title","percent","_ctx","$filters","date","due_date","is_enabled","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","openDelCouponModal","_hoisted_7","_component_couponModal","coupon","tempCoupon","ref","onUpdateCoupon","updateCoupon","_component_DelModal","onDelItem","delCoupon","id","tabindex","role","type","for","placeholder","code","_hoisted_8","number","_hoisted_9","_hoisted_10","_hoisted_11","$emit","name","props","data","emits","watch","this","console","log","dateAndTime","Date","toISOString","split","Math","floor","mixins","modalMixin","__exports__","components","CouponModal","DelModal","config","Object","isNew","methods","getTime","$refs","couponModal","showModal","delComponent","delModal","getCoupons","url","$http","get","tempProduct","then","response","post","$httpMessageState","hideModal","put","delete","created","render"],"sourceRoot":""}