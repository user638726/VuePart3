{"version":3,"file":"js/219.23985c85.js","mappings":"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","sources":["webpack://newproject2/./src/views/Coupons.vue","webpack://newproject2/./src/components/CouponModal.vue","webpack://newproject2/./src/components/CouponModal.vue?3d2f","webpack://newproject2/./src/views/Coupons.vue?be98"],"sourcesContent":["<template>\r\n  <div>\r\n    <Loading :active=\"isLoading\"></Loading>\r\n    <div class=\"text-end mt-4\">\r\n      <button class=\"btn btn-primary\" @click=\"openCouponModal(true)\">\r\n        建立新的優惠券\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <th>名稱</th>\r\n          <th>折扣百分比</th>\r\n          <th>到期日</th>\r\n          <th>是否啟用</th>\r\n          <th>編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(item, key) in coupons\" :key=\"key\">\r\n          <td>{{ item.title }}</td>\r\n          <td>{{ item.percent }}%</td>\r\n          <td>{{ $filters.date(item.due_date) }}</td>\r\n          <td>\r\n            <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\r\n            <span v-else class=\"text-muted\">未起用</span>\r\n          </td>\r\n          <td>\r\n            <div class=\"btn-group\">\r\n              <button\r\n                class=\"btn btn-outline-primary btn-sm\"\r\n                @click=\"openCouponModal(false, item)\"\r\n              >\r\n                編輯\r\n              </button>\r\n              <button\r\n                class=\"btn btn-outline-danger btn-sm\"\r\n                @click=\"openDelCouponModal(item)\"\r\n              >\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <couponModal\r\n      :coupon=\"tempCoupon\"\r\n      ref=\"couponModal\"\r\n      @update-coupon=\"updateCoupon\"\r\n    />\r\n    <DelModal :item=\"tempCoupon\" ref=\"delModal\" @del-item=\"delCoupon\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CouponModal from \"@/components/CouponModal.vue\";\r\nimport DelModal from \"@/components/DelModal.vue\";\r\n\r\nexport default {\r\n  components: { CouponModal, DelModal },\r\n  props: {\r\n    config: Object,\r\n  },\r\n  data() {\r\n    return {\r\n      coupons: {},\r\n      tempCoupon: {\r\n        title: \"\",\r\n        is_enabled: 0,\r\n        percent: 100,\r\n        code: \"\",\r\n      },\r\n      isLoading: false,\r\n      isNew: false,\r\n    };\r\n  },\r\n  methods: {\r\n    openCouponModal(isNew, item) {\r\n      this.isNew = isNew;\r\n      if (this.isNew) {\r\n        this.tempCoupon = {\r\n          due_date: new Date().getTime() / 1000,\r\n        };\r\n      } else {\r\n        this.tempCoupon = { ...item };\r\n      }\r\n      this.$refs.couponModal.showModal();\r\n    },\r\n    openDelCouponModal(item) {\r\n      this.tempCoupon = { ...item };\r\n      const delComponent = this.$refs.delModal;\r\n      delComponent.showModal();\r\n    },\r\n    getCoupons() {\r\n      this.isLoading = true;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons`;\r\n      this.$http.get(url, this.tempProduct).then((response) => {\r\n        this.coupons = response.data.coupons;\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    updateCoupon(tempCoupon) {\r\n      if (this.isNew) {\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\r\n        this.$http.post(url, { data: tempCoupon }).then((response) => {\r\n          this.$httpMessageState(response, \"新增優惠券\");\r\n          this.getCoupons();\r\n          this.$refs.couponModal.hideModal();\r\n        });\r\n      } else {\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n        this.$http.put(url, { data: this.tempCoupon }).then((response) => {\r\n          this.$httpMessageState(response, \"更新優惠券\");\r\n          this.getCoupons();\r\n          this.$refs.couponModal.hideModal();\r\n        });\r\n      }\r\n    },\r\n    delCoupon() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((response) => {\r\n        this.$httpMessageState(response, \"刪除優惠券\");\r\n        const delComponent = this.$refs.delModal;\r\n        delComponent.hideModal();\r\n        this.getCoupons();\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getCoupons();\r\n  },\r\n};\r\n</script>\r\n","<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"couponModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">優惠卷</h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"title\">標題</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"title\"\r\n              v-model=\"tempCoupon.title\"\r\n              placeholder=\"請輸入標題\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"coupon_code\">優惠碼</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"coupon_code\"\r\n              v-model=\"tempCoupon.code\"\r\n              placeholder=\"請輸入優惠碼\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"due_date\">到期日</label>\r\n            <input\r\n              type=\"date\"\r\n              class=\"form-control\"\r\n              id=\"due_date\"\r\n              v-model=\"due_date\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"price\">折扣百分比</label>\r\n            <input\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              id=\"price\"\r\n              v-model.number=\"tempCoupon.percent\"\r\n              placeholder=\"請輸入折扣百分比\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <div class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                :true-value=\"1\"\r\n                :false-value=\"0\"\r\n                v-model=\"tempCoupon.is_enabled\"\r\n                id=\"is_enabled\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"is_enabled\">\r\n                是否啟用\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            Close\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"$emit('update-coupon', tempCoupon)\"\r\n          >\r\n            更新優惠券\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport modalMixin from \"@/mixins/modalMixin\";\r\n\r\nexport default {\r\n  name: \"couponModal\",\r\n  props: {\r\n    coupon: {},\r\n  },\r\n  data() {\r\n    return {\r\n      tempCoupon: {},\r\n      due_date: \"\",\r\n    };\r\n  },\r\n  emits: [\"update-coupon\"],\r\n  watch: {\r\n    coupon() {\r\n      this.tempCoupon = this.coupon;\r\n      // 將時間格式改為 YYYY-MM-DD\r\n      const dateAndTime = new Date(this.tempCoupon.due_date * 1000)\r\n        .toISOString()\r\n        .split(\"T\");\r\n      [this.due_date] = dateAndTime;\r\n    },\r\n    due_date() {\r\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);\r\n    },\r\n  },\r\n  mixins: [modalMixin],\r\n};\r\n</script>\r\n","import { render } from \"./CouponModal.vue?vue&type=template&id=2e1bd31e\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Coupons.vue?vue&type=template&id=1a54e2cc\"\nimport script from \"./Coupons.vue?vue&type=script&lang=js\"\nexport * from \"./Coupons.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createVNode","_component_Loading","active","$data","isLoading","_createElementVNode","_hoisted_1","onClick","_cache","$event","$options","openCouponModal","_hoisted_2","_Fragment","_renderList","coupons","item","key","_toDisplayString","title","percent","_ctx","$filters","date","due_date","is_enabled","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","openDelCouponModal","_hoisted_7","_component_couponModal","coupon","tempCoupon","ref","onUpdateCoupon","updateCoupon","_component_DelModal","onDelItem","delCoupon","id","tabindex","role","type","for","placeholder","code","_hoisted_8","number","_hoisted_9","_hoisted_10","_hoisted_11","$emit","name","props","data","emits","watch","this","dateAndTime","Date","toISOString","split","Math","floor","mixins","modalMixin","__exports__","components","CouponModal","DelModal","config","Object","isNew","methods","getTime","$refs","couponModal","showModal","delComponent","delModal","getCoupons","url","$http","get","tempProduct","then","response","post","$httpMessageState","hideModal","put","delete","created","render"],"sourceRoot":""}